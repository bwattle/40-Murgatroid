<!doctype html>
<html>
<head>
    <title>v1.12 Murgatroid</title>
    <meta charset="utf-8" />
    <script type='text/javascript'>
        //While loop from this site:
        //https://www.w3schools.com/js/js_loop_while.asp
        //this is code to work out how much pay Murgatroid will receive
        function sum() {
            var sum = 0;
            var i = 0;
            var runningTotal = "$0"
            var pay = Number(document.getElementById('txt1stPay')["value"]);
            var pay2dp = pay.toFixed(2); //converts to STRING
            var daysWkd = Number(document.getElementById('txtDayCount')["value"]);
            var intRate = Number(document.getElementById('txtIntRate')["value"]);
            var compInt = (pay * Math.pow((1 + intRate / 100), daysWkd));
            //var compInt = Math.pow(10, 3);
            for (i; i < daysWkd; i++) {
                sum = sum + pay;
                runningTotal = runningTotal + " after day " + (i) +
                    "\npay is $" + numberWithCommas(pay.toFixed(2)) + " so total is $" + numberWithCommas(sum.toFixed(2));
                pay = pay * (1 + intRate / 100);
            }
            runningTotal = runningTotal + "\nThis is $" + pay2dp +
                " less than the Compound Interest formula result below." + "\n(Can't figure out why!)"; 
            document.getElementById('txtRunningTotal')["value"] = runningTotal;
            document.getElementById('txtPayTot')["value"] = "$" + sum;
            document.getElementById('txtCompInt')["value"] = "$" + numberWithCommas(compInt);            
        }
        function numberWithCommas(x) {
            return x.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
            // from: https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript
        }
    </script>
</head>
<body>
    <form id="input">
        <h1>v1.12 Adding commas as 1000 separators to large numbers</h1>
        <h2>(with help from Stack Overflow!)</h2>
        <p><a href="https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript" target="_blank">https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript</a></p>
        In dollars, how much is Murgatroid&#39;s first day&#39;s pay?        <br />
        $<input id="txt1stPay" type="text" value="1" /><br />        <br />
        What will be the daily percentage increase?<br />
        <input id="txtIntRate" type="text" value="100">/%<br />        <br />
        How many days will he work for?<br />
        <input id="txtDayCount" type="text" value="20" />
        days<br />        <br />
        <input id="Run" type="Button" value="run" onclick="sum()" />        <br />
        Murgatroid&#39;s total pay is:<br />
        <textarea id="txtPayTot" rows="1" cols="20"></textarea><br />
        Murgatroid&#39;s pay and totals are:<br />
        <textarea id="txtRunningTotal" rows="25" cols="90"></textarea>        <br />        <br />
        Value at the END of the nth period with the Compound Interest formula is: <br />
        <textarea id="txtCompInt" rows="1" cols="50"></textarea><br />
    </form>
</body>
</html>
